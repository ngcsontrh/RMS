<nz-breadcrumb>
  <nz-breadcrumb-item>
    <a routerLink="/de-tai">Đề tài</a>
  </nz-breadcrumb-item>
  <nz-breadcrumb-item>
    <span *ngIf="isEditMode">Cập nhật</span>
    <span *ngIf="!isEditMode">Ghi lại</span>
  </nz-breadcrumb-item>
</nz-breadcrumb>

<form nz-form [formGroup]="deTaiForm" (ngSubmit)="onSubmit()">
  <div nz-row [nzGutter]="15">
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="ten">Tên đề tài</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng nhập tên đề tài!'">
          <input nz-input formControlName="ten" id="ten" placeholder="Nhập tên đề tài" />
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="maSo">Mã số</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng nhập mã số!'">
          <input nz-input formControlName="maSo" id="maSo" placeholder="Nhập mã số" />
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="mucTieu">Mục tiêu</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng nhập mục tiêu!'">
          <textarea nz-input formControlName="mucTieu" id="mucTieu" placeholder="Nhập mục tiêu" rows="3"></textarea>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="noiDung">Nội dung chính</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng nhập nội dung chính!'">
          <textarea nz-input formControlName="noiDung" id="noiDung" placeholder="Nhập nội dung" rows="3"></textarea>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="capDeTaiId">Cấp đề tài</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng chọn cấp đề tài!'">
          <nz-select formControlName="capDeTaiId" id="capDeTaiId" nzShowSearch nzAllowClear nzPlaceHolder="Chọn hoặc nhập cấp đề tài">
            <nz-option *ngFor="let item of capDeTaiDatas" [nzValue]="item.id" [nzLabel]="item.ten"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="tongKinhPhi">Tổng kinh phí</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng nhập tổng kinh phí!'">
          <nz-input-number formControlName="tongKinhPhi" id="tongKinhPhi" [nzMin]="0" nzPlaceHolder="Nhập tổng kinh phí"></nz-input-number>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label nzFor="kinhPhiHangNam">Kinh phí hàng năm</nz-form-label>
        <nz-form-control>
          <nz-input-number formControlName="kinhPhiHangNam" id="kinhPhiHangNam" [nzMin]="0" nzPlaceHolder="Nhập kinh phí hàng năm"></nz-input-number>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="ngayBatDau">Thời gian bắt đầu</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng chọn ngày bắt đầu!'">
          <nz-date-picker formControlName="ngayBatDau" id="ngayBatDau" nzFormat="DD/MM/YYYY" nzPlaceHolder="Thời gian bắt đầu"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="ngayKetThuc">Thời gian kết thúc</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng chọn ngày kết thúc!'">
          <nz-date-picker formControlName="ngayKetThuc" id="ngayKetThuc" nzFormat="DD/MM/YYYY" nzPlaceHolder="Thời gian kết thúc"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label nzFor="hoSoNghiemThu">Hồ sơ nghiệm thu</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="hoSoNghiemThu" id="hoSoNghiemThu" placeholder="Nhập thông tin hồ sơ nghiệm thu" />
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label nzFor="hoSoSanPham">Hồ sơ sản phẩm</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="hoSoSanPham" id="hoSoSanPham" placeholder="Nhập thông tin hồ sơ sản phẩm" />
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="donViChuTriId">Đơn vị chủ trì</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng chọn đơn vị chủ trì!'">
          <nz-select formControlName="donViChuTriId" id="donViChuTriId" nzShowSearch nzAllowClear nzPlaceHolder="Chọn hoặc nhập đơn vị chủ trì">
            <nz-option *ngFor="let item of donViChuTriDatas" [nzValue]="item.id" [nzLabel]="item.ten"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="chuNhiem">Chủ nhiệm</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng chọn chủ nhiệm!'">
          <nz-select formControlName="chuNhiem" id="chuNhiem" nzShowSearch nzAllowClear nzPlaceHolder="Chọn chủ nhiệm">
            <nz-option *ngFor="let item of tacGiaJsons" [nzValue]="item | json" [nzLabel]="item.ten"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="canBoThamGias">Cán bộ tham gia</nz-form-label>
        <nz-form-control [nzErrorTip]="'Vui lòng chọn cán bộ tham gia!'">
          <nz-select formControlName="canBoThamGias" id="canBoThamGias" nzMode="multiple" nzShowSearch nzAllowClear nzPlaceHolder="Chọn cán bộ tham gia">
            <nz-option *ngFor="let item of tacGiaJsons" [nzValue]="item | json" [nzLabel]="item.ten"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
  <div nz-row nzJustify="center">
    <nz-form-item>
      <button nz-button nzType="primary" [nzLoading]="isDeTaiLoading" type="submit">
        {{ isEditMode ? 'Cập nhật' : 'Ghi lại' }}
      </button>
      <button nz-button nzType="default" (click)="onCancel()" style="margin-left: 8px;">
        Quay lại
      </button>
    </nz-form-item>
  </div>
</form>
